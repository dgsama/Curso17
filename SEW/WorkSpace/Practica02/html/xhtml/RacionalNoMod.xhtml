<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Tipo RacionalNoMod</title>
<link rel="stylesheet" type="text/css" href="../css/java.css" />
</head>
<body class="hl">
    <pre class="hl">
        <a id="linea_1"></a><span class="hl lin">    1 </span><span
            class="hl kwa">package</span> estDatos<span class="hl opt">;</span>
<a id="linea_2"></a><span class="hl lin">    2 </span>
<a id="linea_3"></a><span class="hl lin">    3 </span><span
            class="hl com">/**</span>
<a id="linea_4"></a><span class="hl lin">    4 </span><span
            class="hl com"> * Implementación de la interfaz {&#64;code Racional}. El tipo de</span>
<a id="linea_5"></a><span class="hl lin">    5 </span><span
            class="hl com"> * dato es no modificable o inmutable. </span>
<a id="linea_6"></a><span class="hl lin">    6 </span><span
            class="hl com"> * </span>
<a id="linea_7"></a><span class="hl lin">    7 </span><span
            class="hl com"> * &#64;author Pedro Hernández</span>
<a id="linea_8"></a><span class="hl lin">    8 </span><span
            class="hl com"> */</span>
<a id="linea_9"></a><span class="hl lin">    9 </span>
<a id="linea_10"></a><span class="hl lin">   10 </span><span
            class="hl kwa">public class</span> RacionalNoMod <span
            class="hl kwa">extends</span> AbstractRacional <span
            class="hl opt">{</span>
<a id="linea_11"></a><span class="hl lin">   11 </span>
<a id="linea_12"></a><span class="hl lin">   12 </span>    <span
            class="hl com">/**</span>
<a id="linea_13"></a><span class="hl lin">   13 </span><span
            class="hl com">     * Índice de la componente del array {&#64;code datos} que contiene</span>
<a id="linea_14"></a><span class="hl lin">   14 </span><span
            class="hl com">     * la información (numerador y denominador) del racional</span>
<a id="linea_15"></a><span class="hl lin">   15 </span><span
            class="hl com">     */</span>
<a id="linea_16"></a><span class="hl lin">   16 </span>    <span
            class="hl kwa">protected</span> <span class="hl kwb">int</span> rep<span
            class="hl opt">;</span>
<a id="linea_17"></a><span class="hl lin">   17 </span>    
<a id="linea_18"></a><span class="hl lin">   18 </span>    <span
            class="hl com">/**</span>
<a id="linea_19"></a><span class="hl lin">   19 </span><span
            class="hl com">     * Se reserva espacio de memoria para {&#64;code INICIAL}</span>
<a id="linea_20"></a><span class="hl lin">   20 </span><span
            class="hl com">     * racionales (tamaño inicial del array {&#64;code datos})</span>
<a id="linea_21"></a><span class="hl lin">   21 </span><span
            class="hl com">     */</span>
<a id="linea_22"></a><span class="hl lin">   22 </span>    <span
            class="hl kwa">protected final static</span> <span
            class="hl kwb">int</span> INICIAL <span class="hl opt">=</span> <span
            class="hl num">100</span><span class="hl opt">;</span>
<a id="linea_23"></a><span class="hl lin">   23 </span>    <span
            class="hl com">/**</span>
<a id="linea_24"></a><span class="hl lin">   24 </span><span
            class="hl com">     * Índice de la primera posición libre del array {&#64;code datos}</span>
<a id="linea_25"></a><span class="hl lin">   25 </span><span
            class="hl com">     */</span>
<a id="linea_26"></a><span class="hl lin">   26 </span>    <span
            class="hl kwa">protected static</span> <span class="hl kwb">int</span> numRacionales <span
            class="hl opt">=</span> <span class="hl num">0</span><span
            class="hl opt">;</span>
<a id="linea_27"></a><span class="hl lin">   27 </span>    <span
            class="hl com">/**</span>
<a id="linea_28"></a><span class="hl lin">   28 </span><span
            class="hl com">     * Array de pares de enteros (numerador y denominador)</span>
<a id="linea_29"></a><span class="hl lin">   29 </span><span
            class="hl com">     */</span>
<a id="linea_30"></a><span class="hl lin">   30 </span>    <span
            class="hl kwa">protected static</span> Integer<span
            class="hl opt">[][]</span> datos <span class="hl opt">=</span> <span
            class="hl kwa">new</span> Integer<span class="hl opt">[</span>INICIAL<span
            class="hl opt">][</span><span class="hl num">2</span><span
            class="hl opt">];</span>
<a id="linea_31"></a><span class="hl lin">   31 </span>
<a id="linea_32"></a><span class="hl lin">   32 </span>    <span
            class="hl com">/**</span>
<a id="linea_33"></a><span class="hl lin">   33 </span><span
            class="hl com">     * Duplica la capacidad del espacio de memoria reservado</span>
<a id="linea_34"></a><span class="hl lin">   34 </span><span
            class="hl com">     * para los racionales (array datos)</span>
<a id="linea_35"></a><span class="hl lin">   35 </span><span
            class="hl com">     */</span>
<a id="linea_36"></a><span class="hl lin">   36 </span>    <span
            class="hl kwa">private static</span> <span class="hl kwb">void</span> <span
            class="hl kwd">incrCapacidad</span><span class="hl opt">() {</span>
<a id="linea_37"></a><span class="hl lin">   37 </span>        Integer<span
            class="hl opt">[][]</span> temp <span class="hl opt">=</span> <span
            class="hl kwa">new</span> Integer<span class="hl opt">[</span><span
            class="hl num">2</span> <span class="hl opt">*</span> datos<span
            class="hl opt">.</span>length<span class="hl opt">][</span><span
            class="hl num">2</span><span class="hl opt">];</span>
<a id="linea_38"></a><span class="hl lin">   38 </span>        System<span
            class="hl opt">.</span><span class="hl kwd">arraycopy</span><span
            class="hl opt">(</span>datos<span class="hl opt">,</span> <span
            class="hl num">0</span><span class="hl opt">,</span> temp<span
            class="hl opt">,</span> <span class="hl num">0</span><span
            class="hl opt">,</span> datos<span class="hl opt">.</span>length<span
            class="hl opt">);</span>
<a id="linea_39"></a><span class="hl lin">   39 </span>        datos <span
            class="hl opt">=</span> temp<span class="hl opt">;</span>
<a id="linea_40"></a><span class="hl lin">   40 </span>    <span
            class="hl opt">}</span>
<a id="linea_41"></a><span class="hl lin">   41 </span>    
<a id="linea_42"></a><span class="hl lin">   42 </span>    <span
            class="hl com">/**</span>
<a id="linea_43"></a><span class="hl lin">   43 </span><span
            class="hl com">     * Crea el racional 0/1</span>
<a id="linea_44"></a><span class="hl lin">   44 </span><span
            class="hl com">     */</span>
<a id="linea_45"></a><span class="hl lin">   45 </span>    <span
            class="hl kwa">public</span> <span class="hl kwd">RacionalNoMod</span><span
            class="hl opt">() {</span>
<a id="linea_46"></a><span class="hl lin">   46 </span>        <span
            class="hl kwa">this</span><span class="hl opt">(</span><span
            class="hl num">0</span><span class="hl opt">,</span> <span
            class="hl num">1</span><span class="hl opt">);</span>
<a id="linea_47"></a><span class="hl lin">   47 </span>    <span
            class="hl opt">}</span>
<a id="linea_48"></a><span class="hl lin">   48 </span>
<a id="linea_49"></a><span class="hl lin">   49 </span>    <span
            class="hl com">/**</span>
<a id="linea_50"></a><span class="hl lin">   50 </span><span
            class="hl com">     * Crea un racional de numerador y denominador especificados.</span>
<a id="linea_51"></a><span class="hl lin">   51 </span><span
            class="hl com">     * &#64;param n el numerador del racional</span>
<a id="linea_52"></a><span class="hl lin">   52 </span><span
            class="hl com">     * &#64;param d el denominador del racional</span>
<a id="linea_53"></a><span class="hl lin">   53 </span><span
            class="hl com">     * &#64;throws RuntimeException si el denominador es {&#64;code 0}</span>
<a id="linea_54"></a><span class="hl lin">   54 </span><span
            class="hl com">     */</span>
<a id="linea_55"></a><span class="hl lin">   55 </span>    <span
            class="hl kwa">public</span> <span class="hl kwd">RacionalNoMod</span><span
            class="hl opt">(</span><span class="hl kwb">int</span> n<span
            class="hl opt">,</span> <span class="hl kwb">int</span> d<span
            class="hl opt">) {</span>
<a id="linea_56"></a><span class="hl lin">   56 </span>        <span
            class="hl kwa">if</span> <span class="hl opt">(</span>d <span
            class="hl opt">==</span> <span class="hl num">0</span><span
            class="hl opt">) {</span>
<a id="linea_57"></a><span class="hl lin">   57 </span>            <span
            class="hl kwa">throw new</span> <span class="hl kwd">RuntimeException</span><span
            class="hl opt">(</span><span class="hl str">&quot;El denominador no puede ser cero&quot;</span><span
            class="hl opt">);</span>
<a id="linea_58"></a><span class="hl lin">   58 </span>        <span
            class="hl opt">}</span>
<a id="linea_59"></a><span class="hl lin">   59 </span>        
<a id="linea_60"></a><span class="hl lin">   60 </span>        <span
            class="hl kwa">if</span> <span class="hl opt">(</span>numRacionales <span
            class="hl opt">==</span> datos<span class="hl opt">.</span>length<span
            class="hl opt">) {</span>
<a id="linea_61"></a><span class="hl lin">   61 </span>            <span
            class="hl kwd">incrCapacidad</span><span class="hl opt">();</span>
<a id="linea_62"></a><span class="hl lin">   62 </span>        <span
            class="hl opt">}</span>
<a id="linea_63"></a><span class="hl lin">   63 </span>        
<a id="linea_64"></a><span class="hl lin">   64 </span>        <span
            class="hl slc">// se ocupa la primera componente disponible del array datos</span>
<a id="linea_65"></a><span class="hl lin">   65 </span>        <span
            class="hl kwa">this</span><span class="hl opt">.</span>rep <span
            class="hl opt">=</span> numRacionales<span class="hl opt">++;</span>
<a id="linea_66"></a><span class="hl lin">   66 </span>        datos<span
            class="hl opt">[</span><span class="hl kwa">this</span><span
            class="hl opt">.</span>rep<span class="hl opt">][</span><span
            class="hl num">0</span><span class="hl opt">] =</span> d <span
            class="hl opt">&gt;</span> <span class="hl num">0</span> ? n <span
            class="hl opt">: -</span>n<span class="hl opt">;</span> <span
            class="hl slc">// signo en el numerador</span>
<a id="linea_67"></a><span class="hl lin">   67 </span>        datos<span
            class="hl opt">[</span><span class="hl kwa">this</span><span
            class="hl opt">.</span>rep<span class="hl opt">][</span><span
            class="hl num">1</span><span class="hl opt">] =</span> Math<span
            class="hl opt">.</span><span class="hl kwd">abs</span><span
            class="hl opt">(</span>d<span class="hl opt">);</span>
<a id="linea_68"></a><span class="hl lin">   68 </span>    <span
            class="hl opt">}</span>
<a id="linea_69"></a><span class="hl lin">   69 </span>
<a id="linea_70"></a><span class="hl lin">   70 </span>    <span
            class="hl com">/**</span>
<a id="linea_71"></a><span class="hl lin">   71 </span><span
            class="hl com">     * Crea un racional copia del especificado</span>
<a id="linea_72"></a><span class="hl lin">   72 </span><span
            class="hl com">     * &#64;param r el racional a copiar</span>
<a id="linea_73"></a><span class="hl lin">   73 </span><span
            class="hl com">     */</span>
<a id="linea_74"></a><span class="hl lin">   74 </span>    <span
            class="hl kwa">public</span> <span class="hl kwd">RacionalNoMod</span><span
            class="hl opt">(</span>Racional r<span class="hl opt">) {</span>
<a id="linea_75"></a><span class="hl lin">   75 </span>        RacionalNoMod temp<span
            class="hl opt">;</span>
<a id="linea_76"></a><span class="hl lin">   76 </span>        
<a id="linea_77"></a><span class="hl lin">   77 </span>        <span
            class="hl kwa">if</span> <span class="hl opt">(</span>r <span
            class="hl kwa">instanceof</span> RacionalNoMod<span
            class="hl opt">) {</span>
<a id="linea_78"></a><span class="hl lin">   78 </span>            <span
            class="hl slc">// se puede y es preferible compartir la representación</span>
<a id="linea_79"></a><span class="hl lin">   79 </span>            temp <span
            class="hl opt">= (</span>RacionalNoMod<span class="hl opt">)</span> r<span
            class="hl opt">;</span>
<a id="linea_80"></a><span class="hl lin">   80 </span>        <span
            class="hl opt">}</span>
<a id="linea_81"></a><span class="hl lin">   81 </span>        <span
            class="hl kwa">else</span> <span class="hl opt">{</span>
<a id="linea_82"></a><span class="hl lin">   82 </span>            <span
            class="hl slc">// r no es de está clase y es necesario crear otro racional</span>
<a id="linea_83"></a><span class="hl lin">   83 </span>            temp <span
            class="hl opt">=</span> <span class="hl kwa">new</span> <span
            class="hl kwd">RacionalNoMod</span><span class="hl opt">(</span>r<span
            class="hl opt">.</span><span class="hl kwd">numerador</span><span
            class="hl opt">(),</span> r<span class="hl opt">.</span><span
            class="hl kwd">denominador</span><span class="hl opt">());</span>
<a id="linea_84"></a><span class="hl lin">   84 </span>        <span
            class="hl opt">}</span>
<a id="linea_85"></a><span class="hl lin">   85 </span>        
<a id="linea_86"></a><span class="hl lin">   86 </span>        <span
            class="hl kwa">this</span><span class="hl opt">.</span>rep <span
            class="hl opt">=</span> temp<span class="hl opt">.</span>rep<span
            class="hl opt">;</span>
<a id="linea_87"></a><span class="hl lin">   87 </span>    <span
            class="hl opt">}</span>
<a id="linea_88"></a><span class="hl lin">   88 </span>    
<a id="linea_89"></a><span class="hl lin">   89 </span>    <span
            class="hl com">/**</span>
<a id="linea_90"></a><span class="hl lin">   90 </span><span
            class="hl com">     * {&#64;inheritDoc}</span>
<a id="linea_91"></a><span class="hl lin">   91 </span><span
            class="hl com">     */</span>
<a id="linea_92"></a><span class="hl lin">   92 </span>    <span
            class="hl kwc">&#64;Override</span>
<a id="linea_93"></a><span class="hl lin">   93 </span>    <span
            class="hl kwa">public</span> <span class="hl kwb">int</span> <span
            class="hl kwd">numerador</span><span class="hl opt">() {</span>
<a id="linea_94"></a><span class="hl lin">   94 </span>        <span
            class="hl kwa">return</span> datos<span class="hl opt">[</span><span
            class="hl kwa">this</span><span class="hl opt">.</span>rep<span
            class="hl opt">][</span><span class="hl num">0</span><span
            class="hl opt">];</span>
<a id="linea_95"></a><span class="hl lin">   95 </span>    <span
            class="hl opt">}</span>
<a id="linea_96"></a><span class="hl lin">   96 </span>
<a id="linea_97"></a><span class="hl lin">   97 </span>    <span
            class="hl com">/**</span>
<a id="linea_98"></a><span class="hl lin">   98 </span><span
            class="hl com">     * {&#64;inheritDoc}</span>
<a id="linea_99"></a><span class="hl lin">   99 </span><span
            class="hl com">     */</span>
<a id="linea_100"></a><span class="hl lin">  100 </span>    <span
            class="hl kwc">&#64;Override</span>
<a id="linea_101"></a><span class="hl lin">  101 </span>    <span
            class="hl kwa">public</span> <span class="hl kwb">int</span> <span
            class="hl kwd">denominador</span><span class="hl opt">() {</span>
<a id="linea_102"></a><span class="hl lin">  102 </span>        <span
            class="hl kwa">return</span> datos<span class="hl opt">[</span><span
            class="hl kwa">this</span><span class="hl opt">.</span>rep<span
            class="hl opt">][</span><span class="hl num">1</span><span
            class="hl opt">];</span>
<a id="linea_103"></a><span class="hl lin">  103 </span>    <span
            class="hl opt">}</span>
<a id="linea_104"></a><span class="hl lin">  104 </span>    
<a id="linea_105"></a><span class="hl lin">  105 </span>    <span
            class="hl com">/**</span>
<a id="linea_106"></a><span class="hl lin">  106 </span><span
            class="hl com">     * {&#64;inheritDoc}</span>
<a id="linea_107"></a><span class="hl lin">  107 </span><span
            class="hl com">     */</span>
<a id="linea_108"></a><span class="hl lin">  108 </span>    <span
            class="hl kwc">&#64;Override</span>
<a id="linea_109"></a><span class="hl lin">  109 </span>    <span
            class="hl kwa">public</span> Racional <span class="hl kwd">suma</span><span
            class="hl opt">(</span>Racional r<span class="hl opt">) {</span>
<a id="linea_110"></a><span class="hl lin">  110 </span>        <span
            class="hl kwb">int</span> mcm <span class="hl opt">=</span> <span
            class="hl kwd">mcm</span><span class="hl opt">(</span><span
            class="hl kwa">this</span><span class="hl opt">.</span><span
            class="hl kwd">denominador</span><span class="hl opt">(),</span> r<span
            class="hl opt">.</span><span class="hl kwd">denominador</span><span
            class="hl opt">());</span>
<a id="linea_111"></a><span class="hl lin">  111 </span>        <span
            class="hl kwa">return new</span> <span class="hl kwd">RacionalNoMod</span><span
            class="hl opt">(</span>mcm <span class="hl opt">/</span> <span
            class="hl kwa">this</span><span class="hl opt">.</span><span
            class="hl kwd">denominador</span><span class="hl opt">() *</span> <span
            class="hl kwa">this</span><span class="hl opt">.</span><span
            class="hl kwd">numerador</span><span class="hl opt">() +</span>
<a id="linea_112"></a><span class="hl lin">  112 </span>                                 mcm <span
            class="hl opt">/</span> r<span class="hl opt">.</span><span
            class="hl kwd">denominador</span><span class="hl opt">() *</span> r<span
            class="hl opt">.</span><span class="hl kwd">numerador</span><span
            class="hl opt">(),</span>
<a id="linea_113"></a><span class="hl lin">  113 </span>                                 mcm<span
            class="hl opt">);</span>
<a id="linea_114"></a><span class="hl lin">  114 </span>    <span
            class="hl opt">}</span>
<a id="linea_115"></a><span class="hl lin">  115 </span>
<a id="linea_116"></a><span class="hl lin">  116 </span>    <span
            class="hl com">/**</span>
<a id="linea_117"></a><span class="hl lin">  117 </span><span
            class="hl com">     * {&#64;inheritDoc}</span>
<a id="linea_118"></a><span class="hl lin">  118 </span><span
            class="hl com">     */</span>
<a id="linea_119"></a><span class="hl lin">  119 </span>    <span
            class="hl kwc">&#64;Override</span>
<a id="linea_120"></a><span class="hl lin">  120 </span>    <span
            class="hl kwa">public</span> Racional <span class="hl kwd">reduce</span><span
            class="hl opt">() {</span>
<a id="linea_121"></a><span class="hl lin">  121 </span>        <span
            class="hl kwb">int</span> mcd <span class="hl opt">=</span> <span
            class="hl kwd">mcd</span><span class="hl opt">(</span><span
            class="hl kwa">this</span><span class="hl opt">.</span><span
            class="hl kwd">numerador</span><span class="hl opt">(),</span> <span
            class="hl kwa">this</span><span class="hl opt">.</span><span
            class="hl kwd">denominador</span><span class="hl opt">());</span>
<a id="linea_122"></a><span class="hl lin">  122 </span>        <span
            class="hl kwa">return new</span> <span class="hl kwd">RacionalNoMod</span><span
            class="hl opt">(</span><span class="hl kwa">this</span><span
            class="hl opt">.</span><span class="hl kwd">numerador</span><span
            class="hl opt">() /</span> mcd<span class="hl opt">,</span>
<a id="linea_123"></a><span class="hl lin">  123 </span>                                 <span
            class="hl kwa">this</span><span class="hl opt">.</span><span
            class="hl kwd">denominador</span><span class="hl opt">() /</span> mcd<span
            class="hl opt">);</span>
<a id="linea_124"></a><span class="hl lin">  124 </span>    <span
            class="hl opt">}</span>
<a id="linea_125"></a><span class="hl lin">  125 </span>
<a id="linea_126"></a><span class="hl lin">  126 </span><span
            class="hl opt">}</span>
</pre>
</body>
</html>
<!--HTML generated by highlight 3.9, http://www.andre-simon.de/-->
